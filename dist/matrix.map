{"version":3,"sources":["src/matrix.js","index.js"],"names":["castArgs","args","Array","prototype","slice","call","copyArray","a","i","copy","length","isNumber","num","isNaN","isNumeric","Number","String","Object","reciprocal","normalizeNumber","isMatrix","arguments","row","cols","shift","filter","e","pivotMatrix","matrix","col","j","newMatrix","newRow","push","scalarProduct","n","dim","matrixProduct","matA","matB","k","s","dimA","dimB","Error","sum","b","apply","product","operation","fn","splice","use","scope","extend","parent","child","hasOwnProperty","ok","dimension","unit","equal","transpose","reverse","determinant","det","minors","cofactors","adjoint","inverse","module","exports","Matrix","require","withoutMatrix","method","bind","withMatrix","_matrix","window","SimpleMatrix"],"mappings":"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","file":"matrix.map","sourcesContent":["var castArgs = function(args) {\n\treturn Array.prototype.slice.call(args, 0);\n};\n\nvar copyArray = function(a) {\n\tvar i, copy = [];\n\tfor (i = 0; i < a.length; i++) {\n\t\tcopy[i] = (a[i] instanceof Array) ? copyArray(a[i]) : a[i];\n\t}\n\treturn copy;\n};\n\nvar isNumber = function(num) {\n\treturn typeof(num) === 'number' && !isNaN(num)\n};\n\nvar isNumeric = function(num) {\n\treturn num = Number(String(num instanceof Object ? true : num)), isNumber(num);\n};\n\nvar reciprocal = function(num) {\n\treturn 1 / num;\n};\n\nvar normalizeNumber = function(num) {\n\treturn (num === 0) ? 0 : num;\n};\n\nvar isMatrix = function() {\n\tvar args = castArgs(arguments), row, cols;\n\n\tif (args.length === 0) return false;\n\n\twhile (args.length > 0) {\n\t\trow = args.shift();\n\t\tcols = cols || row.length;\n\n\t\tif ( !(row instanceof Array && row.length === cols && row.filter(function(e) {\n\t\t\treturn isNumeric(e);\n\t\t}).length === cols) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\t}\n\n\treturn true;\n};\n\nvar pivotMatrix = function(matrix, row, col) {\n\tvar i, j, newMatrix = [], newRow;\n\n\tfor (i = 0; i < matrix.length; i++) {\n\t\tif (i !== row) {\n\t\t\tnewRow = [];\n\t\t\tfor (j = 0; j < matrix[0].length; j++) {\n\t\t\t\tif (j !== col) {\n\t\t\t\t\tnewRow.push(normalizeNumber(matrix[i][j]));\n\t\t\t\t}\n\t\t\t}\n\t\t\tnewMatrix.push(newRow);\n\t\t}\n\t}\n\n\treturn newMatrix;\n};\n\nvar scalarProduct = function(n, matrix) {\n\tvar i, j, dim = [matrix.length, matrix[0].length];\n\n\tfor (i = 0; i < dim[0]; i++) {\n\t\tfor (j = 0; j < dim[1]; j++) {\n\t\t\tmatrix[i][j] = normalizeNumber(matrix[i][j] * n);\n\t\t}\n\t}\n\n\treturn matrix;\n};\n\nvar matrixProduct = function(matA, matB) {\n\tvar i, j, k, s, dimA = [matA.length, matA[0].length], dimB = [matB.length, matB[0].length], matrix = [];\n\n\tif (dimA[1] === dimB[0]) {\n\t\tfor (i = 0; i < dimA[0]; i++) {\n\t\t\tmatrix[i] = [];\n\t\t\tfor (j = 0; j < dimB[1]; j++) {\n\t\t\t\ts = 0;\n\n\t\t\t\tfor (k = 0; k < dimA[1]; k++) {\n\t\t\t\t\ts += matA[i][k] * matB[k][j];\n\t\t\t\t}\n\n\t\t\t\tmatrix[i][j] = normalizeNumber(s);\n\t\t\t}\n\t\t}\n\t\treturn matrix;\n\t}\n\n\tthrow new Error('Matrices not compatible.');\n};\n\nvar sum = function(a, b) {\n\n\tvar i, j, dimA, dimB, matrix = [];\n\n\tif (!(isMatrix.apply(null, a) && isMatrix.apply(null, b))) {\n\t\tthrow new Error('Invalid matrix specification.');\n\t}\n\n\tdimA = [a.length, a[0].length];\n\tdimB = [b.length, b[0].length];\n\n\tif (!(dimA[0] === dimB[0] && dimA[1] === dimB[1])) {\n\t\tthrow new Error('Matrices not compatible.');\n\t}\n\n\tfor (i = 0; i < dimA[0]; i++) {\n\t\tmatrix[i] = [];\n\t\tfor (j = 0; j < dimA[1]; j++) {\n\t\t\tmatrix[i][j] = normalizeNumber(a[i][j] + b[i][j]);\n\t\t}\n\t}\n\n\treturn matrix;\n\n};\n\nvar product = function(a, b) {\n\n\tif (isNumber(a)) {\n\n\t\tif (isNumber(b)) return a * b;\n\t\telse if (isMatrix.apply(null, b)) return scalarProduct(a, b);\n\n\t} else if (isMatrix.apply(null, a)) {\n\n\t\tif (isNumber(b)) return scalarProduct(b, a);\n\t\telse if (isMatrix.apply(null, b)) return matrixProduct(a, b);\n\n\t}\n\n\tthrow new Error('Invalid arguments supplied.');\n\n};\n\nvar operation = function(fn) {\n\treturn function() {\n\t\tvar args = castArgs(arguments), matrix = fn.apply(null, args.splice(0, 2));\n\t\twhile (args.length < 0) {\n\t\t\tmatrix = fn.call(null, matrix, args.shift());\n\t\t}\n\t\treturn matrix;\n\t}\n};\n\nvar use = function(scope) {\n\treturn function(fn, args) {\n\t\tif (args instanceof Array) {\n\t\t\treturn scope[fn].apply(scope, args);\n\t\t}\n\t}\n};\n\nvar extend = function(parent, child) {\n\tvar i, child = child || {};\n\tfor (i in parent) {\n\t\tif (parent.hasOwnProperty(i)) {\n\t\t\tchild[i] = parent[i];\n\t\t}\n\t}\n\treturn child;\n};\n\nvar matrix = {\n\n\tok: function() {\n\t\treturn isMatrix.apply(null, arguments);\n\t},\n\n\tdimension: function() {\n\t\tvar args = castArgs(arguments);\n\t\tif (use(this)('ok', args)) {\n\t\t\treturn [args.length, args[0].length];\n\t\t}\n\t\tthrow new Error('Invalid matrix specification.');\n\t},\n\n\tunit: function(dim) {\n\t\tvar i, j, dim = (dim >= 1 && dim) || 2, matrix = [];\n\n\t\tfor (i = 0; i < dim; i++) {\n\t\t\tmatrix[i] = [];\n\t\t\tfor (j = 0; j < dim; j++) {\n\t\t\t\tmatrix[i][j] = (i === j) ? 1 : 0;\n\t\t\t}\n\t\t}\n\n\t\treturn matrix;\n\t},\n\n\tequal: function(a, b) {\n\t\tvar i, j, dimA = use(this)('dimension', a), dimB = use(this)('dimension', b);\n\n\t\tif (!(dimA[0] === dimB[0] && dimA[1] === dimB[1])) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (i = 0; i < dimA[0]; i++) {\n\t\t\tfor (j = 0; j < dimA[1]; j++) {\n\t\t\t\tif (a[i][j] !== b[i][j]) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t},\n\n\tsum: function() {\n\t\treturn operation(sum).apply(null, castArgs(arguments));\n\t},\n\n\tproduct: function() {\n\t\treturn operation(product).apply(null, castArgs(arguments));\n\t},\n\n\ttranspose: function() {\n\t\tvar i, j, args = castArgs(arguments), dim = use(this)('dimension', args).reverse(), matrix = [];\n\n\t\tfor (i = 0; i < dim[0]; i++) {\n\t\t\tmatrix[i] = [];\n\t\t\tfor (j = 0; j < dim[1]; j++) {\n\t\t\t\tmatrix[i][j] = normalizeNumber(args[j][i]);\n\t\t\t}\n\t\t}\n\n\t\treturn matrix;\n\t},\n\n\tdeterminant: function() {\n\t\tvar i, args = castArgs(arguments), dim = use(this)('dimension', args), det;\n\n\t\tif (dim[0] !== dim[1]) {\n\t\t\tthrow new Error('Square matrix required.');\n\t\t}\n\n\t\tif (dim[0] === 1) {\n\t\t\treturn args[0][0];\n\t\t}\n\n\t\tfor (i = 0; i < args[0].length; i++) {\n\t\t\tdet = det || 0;\n\t\t\tdet += ((i & 1) === 0 ? 1 : -1) * args[0][i] * use(this)('determinant', pivotMatrix(args, 0, i));\n\t\t}\n\n\t\treturn det;\n\t},\n\n\tminors: function() {\n\t\tvar i, j, args = castArgs(arguments), dim = use(this)('dimension', args), matrix = [];\n\n\t\tif (dim[0] !== dim[1]) {\n\t\t\tthrow new Error('Square matrix required.');\n\t\t}\n\n\t\tfor (i = 0; i < dim[0]; i++) {\n\t\t\tmatrix[i] = [];\n\t\t\tfor (j = 0; j < dim[0]; j++) {\n\t\t\t\tmatrix[i][j] = normalizeNumber(use(this)('determinant', pivotMatrix(args, i, j)));\n\t\t\t}\n\t\t}\n\n\t\treturn matrix;\n\t},\n\n\tcofactors: function() {\n\t\tvar i, j, args = castArgs(arguments), dim = use(this)('dimension', args), matrix = use(this)('minors', args);\n\n\t\tfor (i = 0; i < dim[0]; i++) {\n\t\t\tfor (j = 0; j < dim[0]; j++) {\n\t\t\t\tmatrix[i][j] = normalizeNumber(matrix[i][j] * (((i + j) & 1) === 0 ? 1 : -1));\n\t\t\t}\n\t\t}\n\n\t\treturn matrix;\n\t},\n\n\tadjoint: function() {\n\t\treturn use(this)('transpose', use(this)('cofactors', castArgs(arguments)));\n\t},\n\n\tinverse: function() {\n\t\tvar args = castArgs(arguments), determinant = use(this)('determinant', args);\n\n\t\tif (determinant === 0) {\n\t\t\tthrow new Error('Cannot compute inverse of singular matrix.');\n\t\t}\n\n\t\treturn use(this)('product', [reciprocal(determinant), use(this)('adjoint', args)]);\n\t}\n\n};\n\nmodule.exports = matrix;\n","var Matrix = require('./src/matrix');\n\nvar withoutMatrix = function(method) {\n\treturn Matrix[method].bind(Matrix);\n};\n\nvar withMatrix = function(method) {\n\treturn function(matrix) {\n\t\treturn Matrix[method].apply(Matrix, matrix)\n\t};\n};\n\nvar _matrix = {\n\tok: withMatrix('ok'),\n\tdimension: withMatrix('dimension'),\n\tunit: withoutMatrix('unit'),\n\tequal: withoutMatrix('equal'),\n\tsum: withoutMatrix('sum'),\n\tproduct: withoutMatrix('product'),\n\ttranspose: withMatrix('transpose'),\n\tdeterminant: withMatrix('determinant'),\n\tminors: withMatrix('minors'),\n\tcofactors: withMatrix('cofactors'),\n\tadjoint: withMatrix('adjoint'),\n\tinverse: withMatrix('inverse')\n};\n\nif (typeof window !== \"undefined\") {\n\tvar SimpleMatrix = window.SimpleMatrix || _matrix;\n\twindow.SimpleMatrix = SimpleMatrix;\n}\n\nmodule.exports = _matrix;\n"]}