!function(r,n){"use strict";var t=r.Mathx||{},i=function(r){return Array.prototype.slice.call(r,0)},e=function(r){return"number"==typeof r&&!isNaN(r)},o=function(){var r,n,t=i(arguments);if(0===t.length)return!1;for(;t.length>0;)if(r=t.shift(),n=n||r.length,r.length!==n||r.filter(function(r){return n=r,n=Number(String(n instanceof Object||n)),e(n);var n}).length!==n)return!1;return!0},u=function(r,n,t){var i,e,o,u=[];for(i=0;i<r.length;i++)if(i!==n){for(o=[],e=0;e<r[0].length;e++)e!==t&&o.push(r[i][e]);u.push(o)}return u},f=function(r,n){var t,i,e=[n.length,n[0].length];for(t=0;t<e[0];t++)for(i=0;i<e[1];i++)n[t][i]*=r;return n},l=function(r,n){var t,i,e,u,f=[];if(!o.apply(null,r)||!o.apply(null,n))throw new Error("Invalid arguments.");if(e=[r.length,r[0].length],u=[n.length,n[0].length],e[0]!==u[0]||e[1]!==u[1])throw new Error("Matrices not compatible.");for(t=0;t<e[0];t++)for(f[t]=[],i=0;i<e[1];i++)f[t][i]=r[t][i]+n[t][i];return f},a=function(r,n){if(e(r)){if(e(n))return r*n;if(o.apply(null,n))return f(r,n)}else if(o.apply(null,r)){if(e(n))return f(n,r);if(o.apply(null,n))return function(r,n){var t,i,e,o,u=[r.length,r[0].length],f=[n.length,n[0].length],l=[];if(u[1]===f[0]){for(t=0;t<u[0];t++)for(l[t]=[],i=0;i<f[1];i++){for(o=0,e=0;e<u[1];e++)o+=r[t][e]*n[e][i];l[t][i]=o}return l}throw new Error("Matrices not compatible.")}(r,n)}throw new Error("Invalid arguments.")},s=function(r){return function(){for(var n=i(arguments),t=r.apply(null,n.splice(0,2));n.length<0;)t=r.call(null,t,n.shift());return t}},h=function(r){return function(n,t){if(t instanceof Array)return r[n].apply(r,t)}},c={ok:function(){return o.apply(null,arguments)},dimension:function(){var r=i(arguments);if(h(this)("ok",r))return[r.length,r[0].length];throw new Error("Invalid matrix specification.")},unit:function(r){r=r>=2&&r||2;var n,t,i=[];for(n=0;n<r;n++)for(i[n]=[],t=0;t<r;t++)i[n][t]=n===t?1:0;return i},equal:function(r,n){var t,i,e=h(this)("dimension",r),o=h(this)("dimension",n);if(e[0]!==o[0]||e[1]!==o[1])return!1;for(t=0;t<e[0];t++)for(i=0;i<e[1];i++)if(r[t][i]!==n[t][i])return!1;return!0},sum:function(){return s(l).apply(null,i(arguments))},product:function(){return s(a).apply(null,i(arguments))},transpose:function(){var r,n,t=i(arguments),e=h(this)("dimension",t).reverse(),o=[];for(r=0;r<e[0];r++)for(o[r]=[],n=0;n<e[1];n++)o[r][n]=t[n][r];return o},determinant:function(){var r,n,t=i(arguments),e=h(this)("dimension",t);if(e[0]!==e[1])throw new Error("Square matrix required.");if(1===e[0])return t[0][0];for(r=0;r<t[0].length;r++)n=n||0,n+=(0==(1&r)?1:-1)*t[0][r]*h(this)("determinant",u(t,0,r));return n},minors:function(){var r,n,t=i(arguments),e=h(this)("dimension",t),o=[];if(e[0]!==e[1])throw new Error("Square matrix required.");for(r=0;r<e[0];r++)for(o[r]=[],n=0;n<e[0];n++)o[r][n]=h(this)("determinant",u(t,r,n));return o},cofactors:function(){var r,n,t=i(arguments),e=h(this)("dimension",t),o=h(this)("minors",t);for(r=0;r<e[0];r++)for(n=0;n<e[0];n++)o[r][n]*=0==(r+n&1)?1:-1;return o},adjoint:function(){return h(this)("transpose",h(this)("cofactors",i(arguments)))},inverse:function(){var r,n=i(arguments);return h(this)("product",[(r=h(this)("determinant",n),1/r),h(this)("adjoint",n)])}};t.Matrix=c,r.Mathx=t}(window);
